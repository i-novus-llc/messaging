Endpoint: `/ws`

## Формат сообщений

### Соединение
```json
{ "type" : "CONNECT", "headers" : { "X-Auth-Token" : "user-name-or-access-token"
                                  , "X-System-Id" : "system-id" } }
```

Хедер `X-System-Id` нужен для того, чтобы можно было использовать один и тот же сервис
сообщений с разными системами. В МТР это разные региональные системы 
и центральный. Все хедеры являются обязательными. Без них сервис не сможет
идентифицировать клиента.

Описание `X-Auth-Token` см. в разделе [Security](Security.md).

### Запрос количества не прочтенных сообещний
```json
{ "type" : "COUNT", "headers" : { "X-System-Id" : "system-id" } }
```

### Подтверждение прочтения
```json
{ "type" : "READ", "headers" : { "X-System-Id" : "system-id" }
, "message" : { "id" : "message-id" }}
```
Если не указать `message.id`, то *все* сообщения для данного пользователя будут
помечены прочтенными.

## Сообщения

Сообщения, которые приходят с сервера, будут иметь следующий вид:


### Уведомления 
```json
{ "id" : 2,
"text" : "текст сообщения",
"icon": "иконка",
"image": "адрес картинки",
"title": "заголовок сообщения",
"date": дата,
"close": true,  - можно ли закрывать
"delay":  300 - сколько времени висит
}
```
### Количество не прочтенных уведомлений
```json
{
"id" : 2, - идентификатор счетчика
"count" : 3 }

```