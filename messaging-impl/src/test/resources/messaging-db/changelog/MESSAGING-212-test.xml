<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">

    <changeSet id="MESSAGING-212-test" author="ilebedenko">
        <comment>Скрипт для тестирования сервиса RecipientService.</comment>
        <sql>
            <!-- tenant -->
            INSERT INTO messaging.tenant VALUES ('tenant', 'Test tenant');
            INSERT INTO messaging.tenant VALUES ('tenant2', 'Test tenant2');
            <!-- channels -->
            INSERT INTO messaging.channel (id, name, queue_name, is_internal, tenant_code) VALUES
            (1, 'notice', 'web_queue', true, 'tenant'),
            (2, 'email', 'email_queue', false, 'tenant'),
            (3, 'custom', 'custom_queue', false, 'tenant2');
            <!-- messages and recipients-->
            INSERT INTO messaging.message (id, text, severity, alert_type, tenant_code, formation_type, recipient_type, channel_id)
            VALUES ('a2bd666b-1684-4005-a10f-f14224f66d0a', 'Message1', 'INFO', 'POPUP', 'tenant', 'HAND', 'USER', 1);
            INSERT INTO messaging.message_recipient (id, message_id, recipient_username, status)
            VALUES (1, 'a2bd666b-1684-4005-a10f-f14224f66d0a', 'web1', 'SCHEDULED');
            INSERT INTO messaging.message_recipient (id, message_id, recipient_username, status)
            VALUES (2, 'a2bd666b-1684-4005-a10f-f14224f66d0a', 'web2', 'SCHEDULED');

            INSERT INTO messaging.message (id, text, severity, alert_type, tenant_code, formation_type, recipient_type, channel_id)
            VALUES ('d1450cd1-5b93-47fe-9e44-a3800476342e', 'Message2', 'INFO', 'POPUP', 'tenant', 'HAND', 'USER', 1);
            INSERT INTO messaging.message_recipient (id, message_id, recipient_username, status)
            VALUES (3, 'd1450cd1-5b93-47fe-9e44-a3800476342e', 'web1', 'SCHEDULED');
            INSERT INTO messaging.message_recipient (id, message_id, recipient_username, status)
            VALUES (4, 'd1450cd1-5b93-47fe-9e44-a3800476342e', 'web2', 'SCHEDULED');

            INSERT INTO messaging.message (id, text, severity, alert_type, tenant_code, formation_type, recipient_type, channel_id)
            VALUES ('497ef832-fa00-4715-a79f-8c13cde89b09', 'Message3', 'INFO', 'POPUP', 'tenant2', 'HAND', 'USER', 2);
            INSERT INTO messaging.message_recipient (id, message_id, recipient_username, status)
            VALUES (5, '497ef832-fa00-4715-a79f-8c13cde89b09', 'web1', 'SCHEDULED');
        </sql>
    </changeSet>
</databaseChangeLog>

