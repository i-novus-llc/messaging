<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-3.0"
      name="Настройка уведомлений">
    <regions>
        <tabs>
            <tab name="История уведомлений">
                <table id="message_list" query-id="messaging_message">
                    <filters>
                        <row>
                            <input-select id="severity" label="Уровень важности">
                                <options>
                                    <option id="SEVERE" name="Важный"/>
                                    <option id="ERROR" name="Ошибка"/>
                                    <option id="WARNING" name="Предупреждение"/>
                                    <option id="INFO" name="Информация"/>
                                </options>
                            </input-select>
                            <input-select id="infoType" label="Информирование" query-id="messaging_channels"/>
                            <date-interval id="sentAt" label="Дата отправки"/>
                        </row>
                    </filters>
                    <columns>
                        <column text-field-id="sentAt" label="Дата отправки">
                            <text format="date DD.MM.YYYY HH:mm:ss"/>
                        </column>
                        <column text-field-id="caption" label="Заголовок"/>
                        <column text-field-id="severity.name" label="Уровень важности"/>
                        <column text-field-id="infoType.name" label="Информирование"/>
                    </columns>
                    <toolbar>
                        <button label="Создать уведомление" id="create" disable-on-empty-model="false" icon="fa fa-plus">
                            <open-page page-id="messaging_message_create" upload="defaults" submit-operation-id="send"/>
                        </button>
                        <button label="Просмотр" id="view" icon="fa fa-eye">
                            <open-page page-id="messaging_message_view"
                                       route="/:id/view"
                                       page-name="Просмотр уведомления от {sentAtFormatted}">
                                <path-param name="id" value="{id}"/>
                            </open-page>
                        </button>
                        <button label="Повторить уведомление" id="repeat" icon="fa fa-repeat">
                            <open-page page-id="messaging_message_create" submit-operation-id="send" detail-field-id="id"/>
                        </button>
                    </toolbar>
                </table>
            </tab>
            <tab name="Шаблоны уведомлений">
                <table id="templates" ref-id="messaging_msg_template_list"/>
            </tab>
        </tabs>
    </regions>
</page>
