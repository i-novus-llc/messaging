<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-3.0"
      name="Просмотр уведомления от {sentAtFormatted}">
    <regions>
        <region place="top">
            <form id="view" query-id="messaging_message" name="Просмотр уведомления">
                <pre-filters>
                    <eq field-id="id" param="id"/>
                </pre-filters>
                <fields>
                    <set field-label-location="left" field-label-align="left" field-label-width="220px">
                        <row>
                            <input-select id="infoType" label="Информирование" enabled="false"/>
                        </row>
                        <row>
                            <input-select id="severity" label="Уровень важности" enabled="false">
                                <options>
                                    <option id="SEVERE" name="Важный"/>
                                    <option id="ERROR" name="Ошибка"/>
                                    <option id="WARNING" name="Предупреждение"/>
                                    <option id="INFO" name="Информация"/>
                                </options>
                                <dependencies>
                                    <visibility on="infoType">'${novus.messaging.web-channel-id}' === infoType.id</visibility>
                                </dependencies>
                            </input-select>
                            <input-select id="alertType" label="Способ отображения" enabled="false">
                                <options>
                                    <option id="BLOCKER" name="Блокирующее уведомление"/>
                                    <option id="POPUP" name="Всплывающее уведомление"/>
                                    <option id="HIDDEN" name="Лента уведомлений"/>
                                </options>
                                <dependencies>
                                    <visibility on="infoType">'${novus.messaging.web-channel-id}' === infoType.id</visibility>
                                </dependencies>
                            </input-select>
                        </row>
                        <row>
                            <input-text id="caption" label="Заголовок уведомления" enabled="false"/>
                        </row>
                        <row>
                            <text-area id="text" label="Текст уведомления" max-rows="5" enabled="false"/>
                        </row>
                        <row>
                            <output-text id="sentAt" label="Дата отправки" enabled="false" format="date DD.MM.YYYY HH:mm:ss"/>
                        </row>
                        <row>
                            <output-text id="role" label="Роль" visible="{role!=null}"/>
                            <output-text id="region.name" label="Регион" visible="{region!=null}"/>
                            <output-text id="organization.name" label="Организация" visible="{organization!=null}"/>
                        </row>
                    </set>
                    <hidden id="attachmentEnabled" default-value="${novus.messaging.attachment.enabled}"/>
                </fields>
            </form>
        </region>
        <table query-id="messaging_attachment" visible="{attachmentEnabled == true}" depends-on="view" selection="none">
            <pre-filters>
                <eq field-id="messageId" param="id"/>
            </pre-filters>
            <columns>
                <column text-field-id="shortFileName" label="Вложения">
                    <link>
                        <a href="${server.servlet.context-path}/proxy/api/attachments/{id}" target="newWindow"/>
                    </link>
                </column>
            </columns>
        </table>
        <table query-id="recipient" depends-on="view" detail-field-id="messageId" name="Получатели">
            <columns>
                <column text-field-id="statusTime">
                    <text format="date DD.MM.YYYY HH:mm:ss"/>
                </column>
                <column text-field-id="status"/>
                <column text-field-id="name"/>
            </columns>
        </table>
    </regions>
</page>
