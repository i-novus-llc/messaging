<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-3.0">
    <regions>
        <form id="feed_view" query-id="messaging_feed">
            <fields>
                <row>
                    <input-select id="severity" label="Уровень важности" enabled="false">
                        <options>
                            <option id="SEVERE" name="Важный"/>
                            <option id="ERROR" name="Ошибка"/>
                            <option id="WARNING" name="Предупреждение"/>
                            <option id="INFO" name="Информация"/>
                        </options>
                    </input-select>
                </row>
                <row>
                    <html id="caption" label="Заголовок уведомления"/>
                </row>
                <row>
                    <html id="text" label="Текст уведомления"/>
                </row>
                <hidden id="attachmentEnabled" default-value="${novus.messaging.attachment.enabled}"/>
            </fields>
            <pre-filters>
                <eq field-id="id" param="id"/>
            </pre-filters>
        </form>
        <table query-id="messaging_attachment" visible="{attachmentEnabled == true}" depends-on="feed_view" selection="none">
            <pre-filters>
                <eq field-id="messageId" param="id"/>
            </pre-filters>
            <columns>
                <column text-field-id="shortFileName" label="Вложения">
                    <link>
                        <a href="${server.servlet.context-path}/proxy/api/attachments/{id}" target="newWindow"/>
                    </link>
                </column>
            </columns>
        </table>
    </regions>
</page>
